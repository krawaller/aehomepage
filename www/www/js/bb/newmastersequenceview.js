(function(){CATS.bb.NewMasterSequenceView=CATS.bb.BaseView.extend({master:true,className:"absbox padbox sequence master",localizeid:"newmastersequence",events:{"click .decimalresultbutton":"showDec","click .simplifyresultbutton":"showSimpl"},passOnBack:function(){return this.trigger("sequenceback")},passOnTop:function(){return this.trigger("sequencetop")},passOnZoom:function(view,path){return this.trigger("zoom",view,path)},passOnNewSequenceView:function(view){return this.trigger("newsequenceview",view)},initialize:function(o,dec,isdec){this.o=o;this.dec=dec;this.isdec=isdec;this.descriptor="NewMasterSequence";this.constructor.__super__.initialize.apply(this,[o]);return this.views=[]},showDec:function(){this.$(".decimalsection > div").css("top","0");return this.$(".simplifysection > div").css("top","105%")},showSimpl:function(){this.$(".decimalsection > div").css("top","105%");return this.$(".simplifysection > div").css("top","0")},addSequence:function(view,el,fipple){this.listenTo(view,"sequencetop",this.passOnTop);this.listenTo(view,"zoom",this.passOnZoom);this.listenTo(view,"newsequenceview",this.passOnNewSequenceView);this.listenTo(view,"sequenceback",this.passOnBack);view.getready(function(){});el.append(view.el);if(fipple==="simpl"){view.$(".choosebuttons").removeClass("hidden");view.$(".simplifyresultbutton").addClass("active")}else if(fipple==="dec"){view.$(".choosebuttons").removeClass("hidden");view.$(".decimalresultbutton").addClass("active")}return this.views.push(view)},render:function(){var _ref;this.$el.html(CATS.cache.templates["#newmastersequenceviewtemplate"]);this.setUI("simplifysection","decimalsection","simplifyresultbutton","decimalresultbutton","choosebuttons");if(!this.isdec){this.addSequence(new CATS.bb.SequenceView(this.o,[],this.o.who||"example",(_ref=this.o.who)==="simplifier"||_ref==="decimalifier"||_ref==="demonstration"?this.o.who:"example"),this.ui.simplifysection,this.dec?"simpl":void 0);if(this.dec){this.addSequence(new CATS.bb.SequenceView(this.dec,[],"decimalifier","decimalifier"),this.ui.decimalsection,"dec");this.$el.addClass("doublemaster");this.showSimpl()}else{this.ui.choosebuttons.addClass("hidden")}}else{this.addSequence(new CATS.bb.SequenceView(this.dec,[],"decimalifier","decimalifier",this.ui.decimalsection));this.showDec();this.ui.choosebuttons.addClass("hidden")}return this},kill:function(){var view,_i,_len,_ref;_ref=this.views;for(_i=0,_len=_ref.length;_i<_len;_i++){view=_ref[_i];view.kill()}return this.cleanup()}})}).call(this);